# ==============================================================
# ğŸš€ Ratecard Backend â€” Dockerfile
# --------------------------------------------------------------
# Version : lÃ©gÃ¨re (Python 3.11 slim)
# Objectif : stabilitÃ© Render, imports corrects, secret file propre
# ==============================================================

FROM python:3.11-slim

# --------------------------------------------------------------
# ğŸ“¦ DÃ©pendances systÃ¨me minimale
# --------------------------------------------------------------
RUN apt-get update && apt-get install -y \
    gcc \
    && rm -rf /var/lib/apt/lists/*

# --------------------------------------------------------------
# ğŸ“ RÃ©pertoire de travail
# --------------------------------------------------------------
WORKDIR /app

# --------------------------------------------------------------
# ğŸ“„ Copie du backend (Render enverra uniquement backend/ via rootDir)
# --------------------------------------------------------------
COPY . /app

# --------------------------------------------------------------
# ğŸ Installer dÃ©pendances Python
# --------------------------------------------------------------
RUN pip install --upgrade pip
RUN pip install --prefer-binary -r requirements.txt

# --------------------------------------------------------------
# â–¶ï¸ Commande de lancement
# --------------------------------------------------------------
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "10000"]
